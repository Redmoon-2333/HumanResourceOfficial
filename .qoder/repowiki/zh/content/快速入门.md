# 快速入门指南

<cite>
**本文档引用的文件**
- [README.md](file://README.md)
- [pom.xml](file://pom.xml)
- [application.yml](file://src\main\resources\application.yml)
- [Main.java](file://src\main\java\com\redmoon2333\Main.java)
- [index.html](file://src\main\resources\static\index.html)
- [UserMapper.xml](file://src\main\resources\mapper\UserMapper.xml)
</cite>

## 目录
1. [项目简介](#项目简介)
2. [前提条件检查清单](#前提条件检查清单)
3. [环境搭建步骤](#环境搭建步骤)
4. [项目配置](#项目配置)
5. [运行项目](#运行项目)
6. [测试API可用性](#测试api可用性)
7. [常见问题及解决方案](#常见问题及解决方案)
8. [总结](#总结)

## 项目简介

这是一个基于Spring Boot的学生会部门官方网站项目，实现了基础的用户登录注册功能。项目采用现代化的技术栈，包括Spring Boot 3.1.4、MySQL 8.0、Spring Security等技术。

### 主要功能特性
- ✅ 用户注册（基于激活码）
- ✅ 用户登录
- ✅ 用户信息管理
- ✅ 激活码管理
- ✅ 基础的权限控制
- ✅ 前端交互页面

**章节来源**
- [README.md](file://README.md#L1-L20)

## 前提条件检查清单

在开始之前，请确保您的开发环境满足以下要求：

### 必需软件版本
- **JDK**: Java 17+ (推荐使用OpenJDK 17)
- **MySQL**: MySQL 8.0+ (推荐使用最新稳定版)
- **Maven**: Maven 3.6+ (推荐使用3.8.6或更高版本)

### 环境检查命令
```bash
# 检查Java版本
java -version

# 检查Maven版本
mvn -v

# 检查MySQL服务状态
# Windows: net start | findstr MySQL
# Linux/macOS: systemctl status mysql
```

### 网络要求
- 确保能够访问互联网以下载Maven依赖
- 确保MySQL服务正常运行且可访问

## 环境搭建步骤

### 第一步：克隆项目代码

```bash
# 使用Git克隆项目
git clone https://github.com/your-repository-url.git
cd HumanResourceOfficial
```

### 第二步：安装JDK和Maven

#### Windows用户
1. 下载并安装OpenJDK 17：https://adoptium.net/
2. 下载并安装Maven：https://maven.apache.org/download.cgi
3. 配置环境变量：
   - 设置JAVA_HOME指向JDK安装目录
   - 将Maven的bin目录添加到PATH环境变量

#### Linux用户
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install openjdk-17-jdk maven

# CentOS/RHEL
sudo yum install java-17-openjdk-devel maven
```

#### macOS用户
```bash
# 使用Homebrew安装
brew install openjdk@17 maven
```

### 第三步：验证环境配置

```bash
# 验证Java安装
java -version

# 验证Maven安装
mvn -v

# 验证Git安装（如果需要克隆代码）
git --version
```

## 项目配置

### 数据库配置

#### 1. 启动MySQL服务

```bash
# Windows
net start MySQL

# Linux
sudo systemctl start mysql

# macOS
brew services start mysql
```

#### 2. 创建数据库和用户

```sql
-- 登录MySQL
mysql -u root -p

-- 创建数据库
CREATE DATABASE hrofficial CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- 创建用户并授权
CREATE USER 'hr_user'@'localhost' IDENTIFIED BY 'hr_password';
GRANT ALL PRIVILEGES ON hrofficial.* TO 'hr_user'@'localhost';
FLUSH PRIVILEGES;

-- 退出MySQL
EXIT;
```

#### 3. 修改数据库连接配置

打开 `src/main/resources/application.yml` 文件，修改数据库连接信息：

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/hrofficial?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=GMT%2B8
    username: hr_user
    password: hr_password
    driver-class-name: com.mysql.cj.jdbc.Driver
```

### 项目依赖配置

项目使用Maven管理依赖，主要技术栈包括：

- **Spring Boot 3.1.4**: 核心框架
- **MyBatis**: ORM框架
- **Spring Security**: 安全框架
- **MySQL Connector**: 数据库驱动
- **JWT**: 令牌认证

**章节来源**
- [pom.xml](file://pom.xml#L1-L88)
- [application.yml](file://src\main\resources\application.yml#L1-L30)

## 运行项目

### 方法一：使用Maven命令运行

```bash
# 1. 更新Maven依赖
mvn clean install

# 2. 启动Spring Boot应用
mvn spring-boot:run

# 或者构建并运行JAR文件
mvn package
java -jar target/HumanResourceOfficial-1.0-SNAPSHOT.jar
```

### 方法二：直接运行Main类

```bash
# 编译项目
mvn compile

# 运行主类
java -cp target/classes com.redmoon2333.Main
```

### 启动过程监控

启动过程中，您应该看到以下关键信息：

```
Tomcat started on port(s): 8080 (http) with context path ''
Started Main in X.XXX seconds (JVM running for Y.YYY)
```

### 访问应用

- **前端页面**: http://localhost:8080
- **API文档**: http://localhost:8080/api/test/health
- **Swagger文档**: 如果项目集成了Swagger，可以通过 http://localhost:8080/swagger-ui/index.html 访问

**章节来源**
- [Main.java](file://src\main\java\com\redmoon2333\Main.java#L1-L13)

## 测试API可用性

### 健康检查端点

使用curl命令测试系统健康状态：

```bash
# 检查系统健康状态
curl -X GET http://localhost:8080/api/test/health

# 预期响应
{
  "success": true,
  "message": "系统运行正常",
  "data": {
    "status": "UP",
    "time": "2024-01-01 12:00:00"
  }
}
```

### 用户注册测试

使用预设的激活码进行注册测试：

```bash
# 使用预设激活码注册
curl -X POST http://localhost:8080/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "testpass123",
    "confirmPassword": "testpass123",
    "activationCode": "TEST123456789ABC",
    "roleHistory": "2024级部长"
  }'

# 预期响应
{
  "success": true,
  "message": "注册成功",
  "data": null
}
```

### 用户登录测试

```bash
# 用户登录
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "testpass123"
  }'

# 预期响应
{
  "success": true,
  "message": "登录成功",
  "data": {
    "userId": 1,
    "username": "testuser",
    "roleHistory": "2024级部长"
  }
}
```

### 生成激活码测试

```bash
# 生成新的激活码
curl -X POST http://localhost:8080/api/test/generate-activation-code \
  -H "Content-Type: application/json"

# 预期响应
{
  "success": true,
  "message": "激活码生成成功",
  "data": {
    "activationCode": "NEW-ACTIVATION-CODE-12345",
    "expireTime": "2024-01-02 12:00:00"
  }
}
```

### 前端页面测试

打开浏览器访问：http://localhost:8080

页面提供了完整的登录和注册功能，包括：
- 用户名密码登录
- 新用户注册（需要激活码）
- 激活码生成工具
- 系统健康状态检查

**章节来源**
- [index.html](file://src\main\resources\static\index.html#L200-L334)

## 常见问题及解决方案

### 问题1：数据库连接失败

**症状**：
```
Communications link failure
The last packet sent successfully to the server was 0 milliseconds ago
```

**解决方案**：
1. 检查MySQL服务是否启动
2. 验证数据库连接配置是否正确
3. 确认防火墙设置允许MySQL连接
4. 检查数据库用户权限

```bash
# 检查MySQL服务状态
# Windows
net start | findstr MySQL

# Linux
systemctl status mysql

# 测试数据库连接
mysql -u hr_user -p -h localhost hrofficial
```

### 问题2：端口冲突

**症状**：
```
Port 8080 is already in use
```

**解决方案**：
修改application.yml中的server.port配置：

```yaml
server:
  port: 8081  # 使用其他可用端口
```

或者使用命令行参数指定端口：
```bash
java -jar target/HumanResourceOfficial-1.0-SNAPSHOT.jar --server.port=8081
```

### 问题3：依赖下载失败

**症状**：
```
Could not resolve dependencies
Failed to collect dependencies
```

**解决方案**：
1. 检查网络连接
2. 使用国内Maven镜像
3. 清理本地Maven缓存

```bash
# 使用阿里云Maven镜像
mvn clean install -Dmaven.test.skip=true

# 清理并重新下载依赖
mvn dependency:purge-local-repository
```

### 问题4：激活码无效

**症状**：
```
激活码不存在或已过期
```

**解决方案**：
1. 使用预设激活码：`TEST123456789ABC`
2. 使用前端页面生成新的激活码
3. 检查激活码数据库表是否正确初始化

### 问题5：JWT令牌验证失败

**症状**：
```
Invalid JWT signature
JWT expired
```

**解决方案**：
1. 检查application.yml中的JWT密钥配置
2. 确认JWT过期时间设置合理
3. 重新生成JWT令牌

```yaml
jwt:
  secret: hr-official-jwt-secret-key-2024-redmoon2333-human-resource-system
  expiration: 7200000  # 2小时，单位毫秒
```

### 调试技巧

1. **启用DEBUG日志**：
```yaml
logging:
  level:
    com.redmoon2333: DEBUG
    org.springframework.security: DEBUG
```

2. **检查数据库表结构**：
```sql
SHOW TABLES;
DESCRIBE user;
DESCRIBE activation_code;
```

3. **查看应用日志**：
```bash
# 查看控制台输出
tail -f logs/app.log

# 或者使用Spring Boot Actuator
curl http://localhost:8080/actuator/loggers
```

## 总结

通过本快速入门指南，您应该能够在15分钟内成功运行项目。以下是关键步骤的总结：

1. **环境准备**：安装JDK 17+、MySQL 8.0+、Maven 3.6+
2. **项目配置**：克隆代码、配置数据库连接、设置激活码
3. **项目运行**：使用Maven命令或直接运行Main类
4. **功能测试**：通过API接口和前端页面验证功能
5. **问题排查**：使用提供的解决方案解决常见问题

### 下一步建议

- 学习项目的整体架构和代码结构
- 尝试添加新的功能模块
- 阅读完整的README文档了解更多细节
- 参与项目的贡献和改进

### 技术支持

如果您在运行过程中遇到任何问题，请参考：
- 项目README文档
- GitHub Issues页面
- 团队开发人员

祝您开发愉快！