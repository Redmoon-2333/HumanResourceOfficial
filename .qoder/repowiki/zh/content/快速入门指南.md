# 快速入门指南

<cite>
**本文档引用的文件**
- [README.md](file://README.md)
- [pom.xml](file://pom.xml)
- [application.yml](file://src\main\resources\application.yml)
- [Main.java](file://src\main\java\com\redmoon2333\Main.java)
</cite>

## 目录
1. [项目简介](#项目简介)
2. [环境要求](#环境要求)
3. [项目克隆与初始化](#项目克lon与初始化)
4. [数据库配置](#数据库配置)
5. [环境变量配置](#环境变量配置)
6. [项目编译与运行](#项目编译与运行)
7. [验证服务启动](#验证服务启动)
8. [常见问题解决](#常见问题解决)
9. [总结](#总结)

## 项目简介

HumanResourceOfficial是一个基于Spring Boot的现代化学生会人力资源管理系统后端服务。该系统专为学生会组织设计，提供数字化管理平台，支持用户认证、权限控制、活动管理、内部资料管理和往届成员查询等核心功能。

### 主要特性

- 🔐 **JWT无状态认证** - 基于JSON Web Token的安全认证机制
- 👥 **基于角色的权限控制** - 细粒度的权限管理体系
- 📋 **活动全生命周期管理** - 支持活动创建、更新、图片管理
- 📁 **内部资料管理** - 分类管理、文件上传、下载统计
- 🔍 **往届成员查询** - 历史数据保存与查询功能
- ☁️ **阿里云OSS集成** - 文件存储与管理
- 📱 **RESTful API设计** - 标准化的API接口
- 🔄 **分页查询支持** - 高效的数据分页处理

## 环境要求

在开始之前，请确保您的开发环境满足以下要求：

### 必需组件

- **Java 17+** - 项目使用Java 17作为开发语言
- **Maven 3.6+** - 项目构建工具
- **MySQL 8.0+** - 数据库存储
- **阿里云OSS账号**（可选）- 用于文件存储

### 技术栈概览

| 技术 | 版本 | 说明 |
|------|------|------|
| Spring Boot | 3.1.4 | 核心框架 |
| Spring Security | 3.1.4 | 安全框架 |
| Spring Data JPA | 3.1.4 | 数据访问层 |
| MyBatis | 3.0.2 | 持久层框架 |
| MySQL | 8.0+ | 数据库 |
| JWT | 0.11.5 | 认证令牌 |
| PageHelper | 1.4.6 | 分页插件 |
| 阿里云OSS | 3.17.2 | 文件存储 |

## 项目克隆与初始化

### 步骤1：克隆项目到本地

打开终端或命令提示符，执行以下命令：

```bash
git clone https://github.com/yourusername/HumanResourceOfficial.git
cd HumanResourceOfficial
```

### 步骤2：项目结构说明

项目采用标准的Maven结构：

```
src/main/java/com/redmoon2333/
├── annotation/          # 自定义注解
├── aspect/              # AOP切面
├── config/              # 配置类
├── controller/          # 控制器层
├── dto/                 # 数据传输对象
├── entity/              # 实体类
├── enums/               # 枚举类
├── exception/           # 异常处理
├── mapper/              # MyBatis映射器
├── service/             # 业务服务层
├── util/                # 工具类
├── validation/          # 数据验证
└── Main.java            # 应用入口
```

**章节来源**
- [README.md](file://README.md#L40-L80)

## 数据库配置

### 步骤1：创建数据库

在MySQL服务器上创建数据库：

```sql
CREATE DATABASE hrofficial CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 步骤2：配置数据库连接

系统默认使用以下数据库配置：

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/hrofficial?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=GMT%2B8&allowPublicKeyRetrieval=true
    username: root
    password: root
    driver-class-name: com.mysql.cj.jdbc.Driver
```

### 步骤3：验证数据库连接

确保MySQL服务正在运行，并且您能够使用上述凭据连接到数据库。

**章节来源**
- [application.yml](file://src\main\resources\application.yml#L1-L15)

## 环境变量配置

### 方式一：修改application.yml文件

编辑`src/main/resources/application.yml`文件，根据您的环境修改配置：

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/hrofficial?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=GMT%2B8
    username: your_username
    password: your_password
    
# 阿里云OSS配置（可选）
aliyun:
  oss:
    endpoint: ${ALIYUN_OSS_ENDPOINT:oss-cn-hangzhou.aliyuncs.com}
    accessKeyId: ${ALIYUN_OSS_ACCESS_KEY_ID}
    accessKeySecret: ${ALIYUN_OSS_ACCESS_KEY_SECRET}
    bucketName: ${ALIYUN_OSS_BUCKET_NAME}
    domain: ${ALIYUN_OSS_DOMAIN:}
```

### 方式二：设置环境变量

#### Windows环境变量设置：
```cmd
set ALIYUN_OSS_ACCESS_KEY_ID=your_access_key_id
set ALIYUN_OSS_ACCESS_KEY_SECRET=your_access_key_secret
set ALIYUN_OSS_BUCKET_NAME=your_bucket_name
```

#### Linux/Mac环境变量设置：
```bash
export ALIYUN_OSS_ACCESS_KEY_ID=your_access_key_id
export ALIYUN_OSS_ACCESS_KEY_SECRET=your_access_key_secret
export ALIYUN_OSS_BUCKET_NAME=your_bucket_name
```

### 关键配置项说明

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| `spring.datasource.url` | 数据库连接URL | jdbc:mysql://localhost:3306/hrofficial |
| `spring.datasource.username` | 数据库用户名 | root |
| `spring.datasource.password` | 数据库密码 | root |
| `jwt.secret` | JWT密钥 | 自动生成 |
| `jwt.expiration` | JWT过期时间（毫秒） | 7200000（2小时） |
| `server.port` | 服务端口 | 8080 |

**章节来源**
- [README.md](file://README.md#L82-L120)
- [application.yml](file://src\main\resources\application.yml#L1-L40)

## 项目编译与运行

### 步骤1：编译项目

在项目根目录下执行以下命令：

```bash
# 清理旧构建并编译
mvn clean compile
```

### 步骤2：运行项目

有两种方式启动应用程序：

#### 方法一：使用Spring Boot Maven插件
```bash
# 直接运行Spring Boot应用
mvn spring-boot:run
```

#### 方法二：打包后运行
```bash
# 打包项目
mvn clean package -DskipTests

# 运行生成的JAR文件
java -jar target/HumanResourceOfficial-1.0-SNAPSHOT.jar
```

### 编译过程说明

编译过程包括以下步骤：
1. **依赖解析** - 下载所有必要的Maven依赖
2. **源码编译** - 将Java源码编译为字节码
3. **资源处理** - 处理配置文件和静态资源
4. **打包** - 生成可执行的JAR文件

**章节来源**
- [README.md](file://README.md#L122-L140)
- [pom.xml](file://pom.xml#L1-L50)

## 验证服务启动

### 步骤1：检查启动日志

启动完成后，您应该看到类似以下的日志输出：

```
Tomcat started on port(s): 8080 (http) with context path ''
Started Main in XX.XXX seconds (JVM running for XX.XXX)
```

### 步骤2：访问健康检查端点

在浏览器中访问：
```
http://localhost:8080
```

或者使用curl命令：
```bash
curl http://localhost:8080
```

### 步骤3：验证API可用性

尝试访问一些基本的API端点：

```bash
# 获取往届活动列表（无需认证）
curl http://localhost:8080/api/past-activities

# 获取活动列表（需要认证）
curl http://localhost:8080/api/activities
```

### 常见启动问题

- **端口被占用**：如果8080端口已被占用，可以在`application.yml`中修改`server.port`配置
- **数据库连接失败**：检查数据库连接配置和MySQL服务状态
- **依赖下载缓慢**：可以配置Maven使用国内镜像源

## 常见问题解决

### 问题1：数据库连接失败

**症状**：启动时出现数据库连接异常

**解决方案**：
1. 检查MySQL服务是否启动
2. 验证数据库连接配置
3. 确认数据库用户权限
4. 检查防火墙设置

```bash
# 测试数据库连接
mysql -h localhost -u your_username -p
```

### 问题2：端口占用

**症状**：端口8080已被占用

**解决方案**：
```bash
# 修改application.yml中的端口配置
server:
  port: 8081  # 使用其他可用端口
```

### 问题3：依赖下载缓慢

**解决方案**：
1. 配置Maven使用国内镜像
2. 设置代理服务器
3. 使用离线模式

```bash
# 使用阿里云Maven镜像
mvn clean compile -DmirrorOf=* -Drepository=https://maven.aliyun.com/repository/public
```

### 问题4：内存不足

**症状**：编译或运行时出现OutOfMemoryError

**解决方案**：
```bash
# 增加JVM堆内存
mvn spring-boot:run -Dspring-boot.run.jvmArguments="-Xmx1024m"
```

### 问题5：JWT认证失败

**症状**：API调用返回认证错误

**解决方案**：
1. 检查JWT密钥配置
2. 验证用户凭据
3. 确认令牌格式正确

## 总结

通过本指南，您已经完成了HumanResourceOfficial系统的本地环境搭建和运行。现在您可以：

1. **访问系统**：通过浏览器访问`http://localhost:8080`
2. **测试API**：使用Postman或其他工具测试API接口
3. **开始开发**：基于现有代码进行功能扩展
4. **部署生产**：参考部署指南将系统部署到生产环境

### 下一步建议

- **学习API文档**：详细了解各个API接口的使用方法
- **探索权限系统**：理解基于角色的权限控制机制
- **熟悉数据库设计**：掌握系统的核心数据模型
- **阅读源码**：深入理解系统架构和实现细节

### 资源链接

- **项目主页**：https://github.com/yourusername/HumanResourceOfficial
- **API文档**：[往届活动API文档](./往届活动API文档.md)
- **OSS使用指南**：[OSS使用指南](./OSS使用指南.md)
- **问题反馈**：GitHub Issues页面

祝您开发愉快！